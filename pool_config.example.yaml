github:
  owner: jerryhjohnson56
  repo: kyra-ophi
  # If GH_TOKEN is exported, the worker/gh CLI will pick it up automatically.
  # Otherwise run: gh auth login

models:
  provider: ollama
  name: "qwen2.5-coder:7b"
  # optional fallbacks the worker can try if the first fails
  fallbacks:
    - "deepseek-coder:6.7b"
    - "llama3.1:8b"

worker:
  max_loops: 1          # change to a bigger number or remove for continuous loop
  sleep_s: 10
  branch_prefix: "worker"
  create_pr: true
  push_mode: "force-with-lease"
  prompt_paths:
    implement_stub: "prompts/implement_stub_prompt.txt"
    review_patch: "prompts/review_patch_prompt.txt"
  tests_cmds:
    python: ["pytest","-q"]
    typescript: ["pnpm","-s","test"]
    rust: ["cargo","check"]
    c: ["make","-s"]
  languages:
    default: python
    # simple regex-like hints by item title/path; adjust anytime
    overrides:
      "p3|runtime|vm|jit|perf": rust
      "p4|devices|firmware|daemon|ffi|capi|driver": c
      "p5|ui|shell|webhelm|app|tauri|tsconfig|tsx|vite": typescript
      "p13|updater|sign|recovery|ab|pack": rust
      "p21|security|vault|cli": rust
      "p22|rag|service|lib|cli": rust
      "p23|accel|fabric|backend|test": c

guardrails:
  forbid_code_fences: true             # models must not return ``` fences
  strip_fences_on_save: true           # worker removes any it sees
  normalize_newlines: true
  max_patch_lines: 500

ci_policies:
  # gate rules that align with included workflows
  require_tests_exist: true
  forbid_large_files_mb: 50
  run_linters:
    python: ["python3","-m","pyflakes"]
    typescript: ["pnpm","-s","lint"]
    rust: ["cargo","fmt","--","--check"]

paths:
  stubs_root: "stubs/items"
  manifest: "manifest.json"
  csv: "KyraOphi_AllSources_Combined_v44.csv"

telemetry:
  log_level: "info"
  redact_secrets: true
